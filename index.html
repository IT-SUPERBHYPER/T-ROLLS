<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Reception Stock Inventory</title>
<style>
  :root {
    --primary-color: #34495e;
    --accent-color: #2ecc71;
    --background-color: #ecf0f1;
    --card-background: #ffffff;
    --text-color: #2c3e50;
    --border-color: #bdc3c7;
    --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
  }
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
    background: linear-gradient(135deg, #ecf0f1 0%, #dfe6e9 100%);
    color: var(--text-color);
    line-height: 1.6;
  }
  h1 {
    text-align: center;
    font-size: 2.5rem;
    color: var(--primary-color);
    margin-bottom: 40px;
    text-transform: uppercase;
    letter-spacing: 2px;
  }
  .container {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  .inventory-section, .stats-section {
    background: var(--card-background);
    padding: 30px;
    margin: 20px 0;
    border-radius: 12px;
    box-shadow: var(--shadow);
    transition: var(--transition);
  }
  .inventory-section:hover, .stats-section:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  }
  h2 {
    font-size: 1.8rem;
    color: var(--primary-color);
    margin-bottom: 20px;
    border-bottom: 2px solid var(--accent-color);
    padding-bottom: 10px;
  }
  h3 {
    font-size: 1.4rem;
    color: var(--primary-color);
    margin-bottom: 10px;
  }
  .item {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
  }
  .item label {
    font-weight: 600;
    color: var(--primary-color);
    width: 150px;
    font-size: 1.1rem;
  }
  select, input[type="text"], input[type="number"] {
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 1rem;
    transition: var(--transition);
    background: #f9f9f9;
    width: 200px;
  }
  select:focus, input:focus {
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.2);
  }
  button {
    padding: 10px 20px;
    background: var(--accent-color);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
  }
  button:hover {
    background: #27ae60;
    transform: translateY(-2px);
  }
  button:active {
    transform: translateY(0);
  }
  button.reset {
    background: #e74c3c;
  }
  button.reset:hover {
    background: #c0392b;
  }
  .current-stocks div {
    font-size: 1.1rem;
    color: var(--text-color);
    margin: 8px 0;
  }
  #stats {
    margin-top: 20px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    background: var(--card-background);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: var(--shadow);
  }
  th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
  }
  th {
    background: var(--primary-color);
    color: white;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.9rem;
  }
  td {
    background: var(--card-background);
    color: var(--text-color);
  }
  tr:last-child td {
    border-bottom: none;
  }
  .log-entry {
    font-size: 0.95rem;
    color: var(--text-color);
    margin: 8px 0;
    padding: 8px;
    background: #f9f9f9;
    border-radius: 6px;
    border-left: 4px solid var(--accent-color);
  }
  .report-section {
    margin-top: 20px;
  }
  .report-section h3 {
    margin-bottom: 10px;
  }
  .report-section p {
    font-size: 1rem;
    color: var(--text-color);
  }
  @media (max-width: 600px) {
    .item {
      flex-direction: column;
      align-items: flex-start;
    }
    select, input[type="text"], input[type="number"] {
      width: 100%;
      margin-bottom: 10px;
    }
    .item label {
      width: 100%;
    }
  }
</style>
</head>
<body>
<h1>Reception Stock Inventory</h1>
<div class="container">
  <div class="inventory-section">
    <h2>Inventory Management</h2>
    <div class="item">
      <label for="itemSelect">Select Item:</label>
      <select id="itemSelect">
        <option value="tp">Toilet Paper</option>
        <option value="sw">Saniwipes</option>
        <option value="fap">First Aid Plasters</option>
        <option value="fam">First Aid Masks</option>
      </select>
    </div>
    <div class="item">
      <label for="quantityIn">Add Stock:</label>
      <input type="number" id="quantityIn" min="0" placeholder="Quantity" />
      <input type="text" id="personIn" placeholder="Person's Name" />
      <button id="addBtn">Add</button>
    </div>
    <div class="item">
      <label for="quantityOut">Take Stock:</label>
      <input type="number" id="quantityOut" min="0" placeholder="Quantity" />
      <input type="text" id="personOut" placeholder="Person's Name" />
      <button id="takeBtn">Taken</button>
    </div>
    <div class="item current-stocks">
      <label>Current Stocks:</label>
      <div>Toilet Paper: <span id="tpStock">0</span></div>
      <div>Saniwipes: <span id="swStock">0</span></div>
      <div>First Aid Plasters: <span id="fapStock">0</span></div>
      <div>First Aid Masks: <span id="famStock">0</span></div>
    </div>
  </div>
  <div class="stats-section">
    <h2>Stats Report</h2>
    <button class="reset" id="resetBtn">Reset Stats</button>
    <div id="stats"></div>
    <h3>Transaction Log</h3>
    <div id="log"></div>
    <div class="report-section">
      <h3>Daily Report</h3>
      <div id="dailyReport"></div>
      <h3>Weekly Report</h3>
      <div id="weeklyReport"></div>
      <h3>Monthly Report</h3>
      <div id="monthlyReport"></div>
    </div>
  </div>
</div>
<script>
  // Inventory items with initial values
  const items = {
    tp: { name: 'Toilet Paper', stock: 0, in: 0, out: 0 },
    sw: { name: 'Saniwipes', stock: 0, in: 0, out: 0 },
    fap: { name: 'First Aid Plasters', stock: 0, in: 0, out: 0 },
    fam: { name: 'First Aid Masks', stock: 0, in: 0, out: 0 }
  };
  let transactionLog = [];

  // Load data from localStorage or initialize defaults
  function loadData() {
    const saved = localStorage.getItem('inventory');
    if (saved) {
      try {
        const savedItems = JSON.parse(saved);
        for (const key in items) {
          if (savedItems[key]) {
            items[key] = savedItems[key];
          }
        }
      } catch (e) {
        console.error('Error parsing inventory from localStorage:', e);
      }
    } else {
      initializeDefaults();
    }
    const savedLog = localStorage.getItem('transactionLog');
    if (savedLog) {
      try {
        transactionLog = JSON.parse(savedLog);
      } catch (e) {
        console.error('Error parsing transactionLog:', e);
        transactionLog = [];
      }
    } else {
      transactionLog = [];
    }
  }

  function initializeDefaults() {
    items.tp = { name: 'Toilet Paper', stock: 100, in: 100, out: 0 };
    items.sw = { name: 'Saniwipes', stock: 50, in: 50, out: 0 };
    items.fap = { name: 'First Aid Plasters', stock: 200, in: 200, out: 0 };
    items.fam = { name: 'First Aid Masks', stock: 75, in: 75, out: 0 };
    transactionLog = [
      "System initialized with default stock on " + new Date().toLocaleString()
    ];
    saveData();
  }

  function saveData() {
    localStorage.setItem('inventory', JSON.stringify(items));
    localStorage.setItem('transactionLog', JSON.stringify(transactionLog));
  }

  function updateDisplay() {
    document.getElementById('tpStock').textContent = items.tp.stock;
    document.getElementById('swStock').textContent = items.sw.stock;
    document.getElementById('fapStock').textContent = items.fap.stock;
    document.getElementById('famStock').textContent = items.fam.stock;
  }

  function updateStats() {
    let html = '<table><thead><tr><th>Item</th><th>Current Stock</th><th>Total In</th><th>Total Out</th></tr></thead><tbody>';
    for (const key in items) {
      const item = items[key];
      html += `<tr>
        <td>${item.name}</td>
        <td>${item.stock}</td>
        <td>${item.in}</td>
        <td>${item.out}</td>
      </tr>`;
    }
    html += '</tbody></table>';
    document.getElementById('stats').innerHTML = html;
  }

  function updateLog() {
    const logDiv = document.getElementById('log');
    if (transactionLog.length === 0) {
      logDiv.innerHTML = '<p>No transactions yet.</p>';
      return;
    }
    let html = '';
    // Show latest 10 logs
    const recentLogs = transactionLog.slice(-10).reverse();
    for (const entry of recentLogs) {
      html += `<div class="log-entry">${entry}</div>`;
    }
    logDiv.innerHTML = html;
  }

  // Add stock function
  function addStock() {
    const itemKey = document.getElementById('itemSelect').value;
    const qtyInput = document.getElementById('quantityIn');
    const personInput = document.getElementById('personIn');
    const qty = Number(qtyInput.value);
    const person = personInput.value.trim();
    if (!qty || qty <= 0) {
      alert('Please enter a positive quantity to add.');
      return;
    }
    if (person === '') {
      alert('Please enter the person\'s name adding the stock.');
      return;
    }
    items[itemKey].stock += qty;
    items[itemKey].in += qty;
    const logEntry = `[${new Date().toLocaleString()}] Added ${qty} of ${items[itemKey].name} by ${person}.`;
    transactionLog.push(logEntry);
    saveData();
    updateDisplay();
    updateStats();
    updateLog();
    generateReports();
    qtyInput.value = '';
    personInput.value = '';
  }

  // Take stock function
  function takeStock() {
    const itemKey = document.getElementById('itemSelect').value;
    const qtyInput = document.getElementById('quantityOut');
    const personInput = document.getElementById('personOut');
    const qty = Number(qtyInput.value);
    const person = personInput.value.trim();
    if (!qty || qty <= 0) {
      alert('Please enter a positive quantity to take.');
      return;
    }
    if (person === '') {
      alert('Please enter the person\'s name taking the stock.');
      return;
    }
    if (items[itemKey].stock < qty) {
      alert(`Not enough stock of ${items[itemKey].name}. Current stock: ${items[itemKey].stock}`);
      return;
    }
    items[itemKey].stock -= qty;
    items[itemKey].out += qty;
    const logEntry = `[${new Date().toLocaleString()}] Taken ${qty} of ${items[itemKey].name} by ${person}.`;
    transactionLog.push(logEntry);
    saveData();
    updateDisplay();
    updateStats();
    updateLog();
    generateReports();
    qtyInput.value = '';
    personInput.value = '';
  }

  // Reset function
  function resetStats() {
    if (!confirm('Are you sure you want to reset all stats and logs? This cannot be undone.')) return;
    for (const key in items) {
      items[key].stock = 0;
      items[key].in = 0;
      items[key].out = 0;
    }
    transactionLog = [`[${new Date().toLocaleString()}] Stats and stock reset.`];
    saveData();
    updateDisplay();
    updateStats();
    updateLog();
    generateReports();
  }

  // Generate reports
  function generateReports() {
    updateDailyReport();
    updateWeeklyReport();
    updateMonthlyReport();
  }

  // Update daily report
  function updateDailyReport() {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const tomorrow = new Date(today);
    tomorrow.setDate(tomorrow.getDate() + 1);
    const dailyTransactions = transactionLog.filter(entry => {
      if (typeof entry !== 'string') return false;
      const match = entry.match(/\[(.*?)\]/);
      if (!match) return false;
      const entryDate = new Date(match[1]);
      return entryDate >= today && entryDate < tomorrow;
    });
    document.getElementById('dailyReport').innerHTML = dailyTransactions.join('<br>') || '<p>No transactions today.</p>';
  }

  // Update weekly report
  function updateWeeklyReport() {
    const today = new Date();
    const firstDayOfWeek = new Date(today.setDate(today.getDate() - today.getDay()));
    firstDayOfWeek.setHours(0, 0, 0, 0);
    const lastDayOfWeek = new Date(firstDayOfWeek);
    lastDayOfWeek.setDate(lastDayOfWeek.getDate() + 7);
    const weeklyTransactions = transactionLog.filter(entry => {
      if (typeof entry !== 'string') return false;
      const match = entry.match(/\[(.*?)\]/);
      if (!match) return false;
      const entryDate = new Date(match[1]);
      return entryDate >= firstDayOfWeek && entryDate < lastDayOfWeek;
    });
    document.getElementById('weeklyReport').innerHTML = weeklyTransactions.join('<br>') || '<p>No transactions this week.</p>';
  }

  // Update monthly report
  function updateMonthlyReport() {
    const today = new Date();
    const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
    firstDayOfMonth.setHours(0, 0, 0, 0);
    const lastDayOfMonth = new Date(today.getFullYear(), today.getMonth() + 1, 1);
    lastDayOfMonth.setHours(0, 0, 0, 0);
    const monthlyTransactions = transactionLog.filter(entry => {
      if (typeof entry !== 'string') return false;
      const match = entry.match(/\[(.*?)\]/);
      if (!match) return false;
      const entryDate = new Date(match[1]);
      return entryDate >= firstDayOfMonth && entryDate < lastDayOfMonth;
    });
    document.getElementById('monthlyReport').innerHTML = monthlyTransactions.join('<br>') || '<p>No transactions this month.</p>';
  }

  // Attach event listeners on DOMContentLoaded
  document.addEventListener('DOMContentLoaded', () => {
    loadData();
    updateDisplay();
    updateStats();
    updateLog();
    generateReports();
    document.getElementById('addBtn').addEventListener('click', addStock);
    document.getElementById('takeBtn').addEventListener('click', takeStock);
    document.getElementById('resetBtn').addEventListener('click', resetStats);
  });
</script>
</body>
</html>